@page "/CreateCustomer"
@using SEP3_Tier1.Models.Users
@using SEP3_Tier1.Data
@using SEP3_Tier1.Data.Users
@inject NavigationManager NavigationManager
@inject ICustomerService CustomerService
@* @attribute [Authorize(Policy = "MustBeAdmin")] *@

<h3>CreateCustomer</h3>


<EditForm Model="customer" OnValidSubmit="SubmitCustomer">
 <DataAnnotationsValidator/>
    <ValidationSummary/>    
<div class="form-group"><input type="text" placeholder="Username" @bind-value="customer.username"></div>
<div class="form-group"><input type="text" placeholder="Password" @bind-value="customer.password"></div>
<div class="form-group"><input type="text" placeholder="Address" @bind-value="customer.address"></div>
<div class="form-group"><input type="text" placeholder="Postcode" @bind-value="customer.postCode"></div>
<div class="form-group"><input type="text" placeholder="Firstname" @bind-value="customer.firstName"></div>
<div class="form-group"><input type="text" placeholder="Lastname" @bind-value="customer.lastName"></div>
<div class="form-group"><input type="text" placeholder="Email" @bind-value="customer.email"></div>
<div class="form-group"><input type="text" placeholder="Phonenumber" @bind-value="customer.phoneNumber"></div>
    <button class="btn btn-outline-dark" type="submit">Submit</button>
</EditForm>

@code {

    // private string username;
    // private string password;
    // private string address;
    // private string postCode;
    // private string firstname;
    // private string lastname;
    // private string email;
    // private string phonenumber;

    private Customer customer;

    public void SubmitCustomer() {
        CustomerService.CreateCustomerAsync(customer);
        NavigationManager.NavigateTo("/");
        Console.Write("1start" + customer.ToString() + " 1end");
    }

    protected override async Task OnInitializedAsync() {
        customer = new Customer ();
        customer.role = "Customer";
        
    }

}